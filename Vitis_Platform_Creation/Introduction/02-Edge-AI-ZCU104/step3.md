## Step 3: Create the Vitis Platform

First we create a Vitis platform project with the XSA file generated by Vivado from Step 1.

1. Source Vitis and XRT settings

   ```
   source <Vitis_Install_Directory>/settings64.sh
   source /opt/xilinx/xrt/setup.sh
   ```

2. Go to the ***zcu104_custom_pkg*** folder you created:

   ```
   cd <full_pathname_to_zcu104_custom_pkg>
   ```

3. Launch Vitis by typing ```vitis``` in the console.

4. Select ***zcu104_custom_pkg*** folder as workspace directory.

5. In the Vitis IDE, select ***File > New > Platform Project*** to create a platform project.<br />

6. Enter the project name. For this example, type ```zcu104_custom```, click ***Next***.

7. In the Platform page,

   a) Click ***Browse*** button, select the XSA file generated by the Vivado. In this case, it is located in ```vivado/zcu104_custom_platform.xsa```.
   b) Set the operating system to ***linux***.

   c) Set the processor to ***psu_cortexa53***.

   d) Architecture: ***64-bit***

   e) ***Uncheck*** option ***Generate boot components***, because we'll use PetaLinux generated boot components.

   f) Click ***Finish***.

Next we setup software settings in Platform Settings view.

1. In the Platform Settings view, observe the following:<br />
   - The name of the Platform Settings view matches the platform project name of ***zcu104_custom***.<br />
   - A psu_cortexa53 device icon is shown, containing a Linux on psu_cortexa53 domain.<br />
2. Click the ***linux on psu_cortexa53*** domain, browse to the locations and select the directory or file needed to complete the dialog box for the following:

   - ***Bif file***: Browse to ***zcu104_custom_pkg/pfm/boot/linux.bif*** file and click OK.
   - ***Boot Components Direcotory***: Browse to ***zcu104_custom_pkg/pfm/boot*** and click OK.
   - ***Linux Image Directory***: Browse to ***zcu104_custom_pkg/pfm/image*** and click OK.

![vitis_linux_config.png](./images/vitis_linux_config.png)

11. Click ***zcu104_custom*** project in the Vitis Explorer view, click the ***Build*** button to generate the platform.
    ![](./images/build_vitis_platform.png)

***Note: The generated platform is placed in the export directory. BSP and source files are also provided for re-building the FSBL and PMU if desired and are associated with the platform. The platform is ready to be used for application development.***

![](./images/vitis_platform_output.png)



If you'd create an Vitis application in the same workspace as this platform, you can find this platform available in the platform selection page in platform creation wizard. If you'd like to reuse this platform in another workspace, add its path to PLATFORM_REPO_PATHS environment variable before launching Vitis GUI, or use "Add" button in platform selection page of Vitis GUI to add its path.

***[Next let's try to build some applications on this platform and test them.](./step4.md)***

<p align="center"><sup>Copyright&copy; 2020 Xilinx</sup></p>